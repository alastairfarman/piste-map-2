(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{52:function(e,t,a){e.exports=a(93)},59:function(e,t,a){},93:function(e,t,a){"use strict";a.r(t);var n=a(4),s=a.n(n),o=a(27),l=a.n(o),r=(a(59),a(20),a(11)),i=a(10),c=a(19),u=a(99),m=a(97),p=a(95),d=a(96),f=a(49),g=a(98),h=a(94),b=a(1),E=a(0),y=function(e){var t=Object(n.useState)(1),a=Object(i.a)(t,2),s=a[0],o=a[1],l=Object(E.m)().camera;return Object(E.a)(function(){var t=new b.Vector3;e.clampPoint(l.position,t);var a=l.position.distanceTo(t),n=Math.min(a/10,1);s!==n&&o(n)}),s};function v(e){var t=e.toggleState,a=e.liftData,o=Object(E.c)(f.a,"./LaPlagne_crop.glb"),l=(new b.Box3).setFromObject(o.scene),r=y(l),i=function(e,t){for(;e;){if(e.name===t)return!0;e=e.parent}return!1},c=function(){var e=[],t=[],a=[];return o.scene.traverse(function(n){n.isMesh?i(n,"Topography")?(n.castShadow=!0,n.receiveShadow=!0,n.material=new b.MeshStandardMaterial({color:"white",side:b.DoubleSide,roughness:.3})):i(n,"Buildings")&&(n.castShadow=!0,n.receiveShadow=!0):"Group"!==n.type&&"Object3D"!==n.type||!n.name.startsWith("Town_")||e.push(n),n.name.startsWith("Lift_")&&(n.castShadow=!0,t.push(n)),n.name.startsWith("Run_")&&a.push(n)}),{emptyObjects:e,liftObjects:t,runMeshes:a}}(),u=c.emptyObjects,m=c.liftObjects,p=c.runMeshes,d=u.map(function(e){return{name:e.name.split("_").slice(1).join(" "),position:e.position}}),v=m.map(function(e){var t=e.name.split("_").slice(1).join(" "),n=a().skiLifts.find(function(e){return e.name===t}),s=n?n.status:"unknown";return console.log(t,s),{name:t,position:e.position,status:s}});return Object(n.useEffect)(function(){p.forEach(function(e){e.visible=t.runs})},[t.runs]),s.a.createElement(s.a.Fragment,null,s.a.createElement("primitive",{object:o.scene}),t.resortLabels&&d.map(function(e){return s.a.createElement(g.a,{key:e.name,position:[e.position.x,e.position.y+1.2,e.position.z],rotation:[Math.PI/2,Math.PI,0],color:"black",fontSize:.4,fillOpacity:r,font:"./Rubik-Medium.ttf"},e.name.toUpperCase())}),t.liftLabels&&v.map(function(e){return s.a.createElement(s.a.Fragment,null,s.a.createElement(g.a,{key:e.name,position:[e.position.x,e.position.y+.2,e.position.z],rotation:[0,Math.PI,0],color:"black",fontSize:.1,outlineWidth:.015,outlineColor:"white",font:"./Rubik-Medium.ttf",toneMapped:!1},e.name.toUpperCase()),s.a.createElement(h.a,{key:e.name+"indicator",position:[e.position.x,e.position.y+.06,e.position.z],args:[.035,16,16]},s.a.createElement("meshBasicMaterial",{color:"open"===e.status?"green":"red"})))}))}function w(e){var t=e.resortData;return t?s.a.createElement("div",null,s.a.createElement("h1",null,t.resort.name),s.a.createElement("div",null,s.a.createElement("img",{src:"top.png",alt:"Top",style:{width:"25px"}}),s.a.createElement("span",{style:{padding:"0 0.5rem 0 0.5rem"}},t.top.elevation),s.a.createElement("span",{style:{padding:"0 0.5rem 0 0.5rem"}},t.top.snowDepth),s.a.createElement("span",{style:{padding:"0 0.5rem 0 0.5rem"}},t.top.temperature," \xb0C")),s.a.createElement("div",null,s.a.createElement("img",{src:"bottom.png",alt:"Resort",style:{width:"25px"}}),s.a.createElement("span",{style:{padding:"0 0.5rem 0 0.5rem"}},t.bottom.elevation),s.a.createElement("span",{style:{padding:"0 0.5rem 0 0.5rem"}},t.bottom.snowDepth),s.a.createElement("span",{style:{padding:"0 0.5rem 0 0.5rem"}},t.bottom.temperature," \xb0C"))):s.a.createElement("p",null,"Loading resort data...")}function S(e){var t=e.hourlyData;return t?s.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)"}},t.map(function(e,t){return s.a.createElement("div",{key:t},s.a.createElement("h2",null,e.time),s.a.createElement("p",null,e.description),s.a.createElement("p",null,e.windSpeed," km/h"))})):s.a.createElement("p",null,"Loading hourly forecast...")}function x(e){var t=e.liftStatusData;return t?s.a.createElement("div",null,s.a.createElement("img",{src:"./lifts.png",alt:"Lifts",width:"25px"}),s.a.createElement("span",{style:{padding:"0 0.5rem 0 0.5rem"}},s.a.createElement("span",{style:{color:"green"}},"\u2022")," ",t.open),s.a.createElement("span",{style:{padding:"0 0.5rem 0 0.5rem"}},s.a.createElement("span",{style:{color:"red"}},"\u2022")," ",t.closed),s.a.createElement("span",{style:{padding:"0 0.5rem 0 0.5rem"}},s.a.createElement("span",{style:{color:"grey"}},"\u2022")," ",t.ooo)):s.a.createElement("p",null,"Loading lift status...")}function L(e){var t=e.toggleState,a=e.toggleRuns,n=e.toggleSatellite,o=(e.toggleResortLabels,e.toggleLiftLabels);return s.a.createElement("div",null,s.a.createElement("h1",null,"Toggle Buttons"),s.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},s.a.createElement("button",{style:{all:"unset",border:"solid 1px white",padding:"2px",borderRadius:"5px"},onClick:a},s.a.createElement("img",{src:"./run.png",alt:"Runs",style:{width:"25px"}})),t.runs?"Hide":"Show"),s.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},s.a.createElement("button",{style:{all:"unset",border:"solid 1px white",padding:"2px",borderRadius:"5px"},onClick:n},s.a.createElement("img",{src:"./satellite.png",alt:"Satellite",style:{width:"25px"}})),t.satellite?"Hide":"Show"),s.a.createElement("button",{style:{all:"unset",border:"solid 1px white",padding:"2px",borderRadius:"5px"},onClick:o},s.a.createElement("img",{src:"./lifts.png",alt:"Lifts",style:{width:"25px"}})))}var j=a(92),O=j.format,D=j.utcToZonedTime;function k(){for(var e=new Date,t=D(e,"Europe/Paris"),a=O(t,"HH:mm"),n=[{name:"Vanoise Express",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"T\xe9l\xe9metro",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Grande Rochette",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"T\xe9l\xe9bus",status:a>="08:00"&&a<"18:00"?"open":"closed"},{name:"Lac Noir",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"T\xe9l\xe9buffette",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Montalbert",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Champagny",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Bellec\xf4te",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Coches",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Roche de Mio",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Belle Plagne",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Les Colosses",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Arpette",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"La Lovati\xe8re",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Inversens",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Crozats",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Les Envers",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"B\xe9coin",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Verdons Sud",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Bergerie",status:"ooo"},{name:"Plan Bois",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"La Roche",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Bijolin",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Carella",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Blanchets",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Borseliers",status:"ooo"},{name:"La Rossa",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Colorado",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Pierres Blanches",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Les Quillis",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Montchavin",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Les Bauches",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Travers\xe9e",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"M\xe9l\xe8zes",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Glacier",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"1800",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Boulevard",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Dos Rond",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Adrets",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Golf",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Chalet de Bellec\xf4te",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Dou du Praz",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Ecole Plagne-Montalbert",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Gentil",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Aime-La Plagne",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Stade",status:a>="09:00"&&a<"16:00"?"open":"closed"},{name:"Eterlou",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Grenouilles",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Petit Sauget",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Praconduit",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Tyrolien",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Grangette",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Borseliers 3",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Plan Leschaux",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Col de Forcle",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Chevrette",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Biquet",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Aollets",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Cr\xeates",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"France",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Dromadaires",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Aiglon",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Patinoire",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Plateau Carella",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Replat",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Sucette",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Solu",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Ange",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Belle Plagne",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Indiens",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Ourson",status:a>="08:30"&&a<"16:30"?"open":"closed"},{name:"Petits Loups",status:a>="08:30"&&a<"16:30"?"open":"closed"}],s=0,o=0,l=0,r=0,i=n;r<i.length;r++){var c=i[r];"open"===c.status?s++:"closed"===c.status?o++:l++}return{skiLifts:n,statusSummary:{open:s,closed:o,ooo:l}}}var P=function(){var e=Object(n.useState)({resort:{name:null,country:null,freshSnowfall:null,lastSnowfallDate:null},top:{snowDepth:0,temperature:0,elevation:0},bottom:{snowDepth:0,temperature:0,elevation:0}}),t=Object(i.a)(e,2),a=t[0],o=(t[1],Object(n.useState)([{time:"10:00",description:"Sunny",windSpeed:5},{time:"11:00",description:"Partly Cloudy",windSpeed:7}])),l=Object(i.a)(o,2),f=l[0],g=(l[1],Object(n.useState)({open:k().statusSummary.open,closed:k().statusSummary.closed,ooo:k().statusSummary.ooo})),h=Object(i.a)(g,2),b=h[0],E=(h[1],Object(n.useState)({runs:!0,satellite:!0,resortLabels:!0,liftLabels:!0})),y=Object(i.a)(E,2),j=y[0],O=y[1];return Object(n.useEffect)(function(){},[]),s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"App"},s.a.createElement("div",{style:{position:"absolute",zIndex:"2",color:"white",right:0,height:"100%",padding:"1rem",backgroundColor:"rgba(0,0,0,1)",fontFamily:"Rubik",display:"flex",flexDirection:"column",alignItems:"center"}},s.a.createElement(w,{resortData:a}),s.a.createElement(S,{hourlyData:f}),s.a.createElement(x,{liftStatusData:b}),s.a.createElement(L,{toggleState:j,toggleRuns:function(){O(function(e){return Object(r.a)({},e,{runs:!e.runs})})},toggleSatellite:function(){O(function(e){return Object(r.a)({},e,{satellite:!e.satellite})})},toggleResortLabels:function(){O(function(e){return Object(r.a)({},e,{resortLabels:!e.resortLabels})})},toggleLiftLabels:function(){O(function(e){return Object(r.a)({},e,{liftLabels:!e.liftLabels})})}})),s.a.createElement(c.a,{style:{position:"absolute",top:0,left:0},camera:{position:[0,20,-10]},gl:{antialias:!0,toneMappingExposure:1},shadows:!0},s.a.createElement("fogExp2",{attach:"fog",args:["#ffffff",.02]}),s.a.createElement(u.a,{files:"https://dl.polyhaven.org/file/ph-assets/HDRIs/hdr/2k/syferfontein_18d_clear_puresky_2k.hdr",background:!0}),s.a.createElement(m.a,{enableDamping:!0,enableZoom:!0,enableRotate:!0,maxPolarAngle:Math.PI/4,minPolarAngle:0,minDistance:4,maxDistance:30}),s.a.createElement(n.Suspense,{fallback:s.a.createElement(p.a,null,s.a.createElement("img",{src:"./icon.png",style:{position:"fixed",width:"50px",top:"50%",left:"50%",transform:"translate(-50%, -50%)",animation:"loading 2s ease-in-out infinite"}}))},s.a.createElement(v,{toggleState:j,liftData:k})),s.a.createElement(d.a,null))))};l.a.createRoot(document.getElementById("root")).render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(P,null)))}},[[52,2,1]]]);
//# sourceMappingURL=main.7cd0c4bf.chunk.js.map